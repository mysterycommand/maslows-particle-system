{"version":3,"sources":["lib/index.ts","app/types.ts","app/index.ts","components/Form/Form.module.css","components/Message/Message.module.css","components/App/App.module.css","components/Messages/Messages.module.css","components/Sentiment/Sentiment.module.css","components/Messages/Messages.tsx","components/Fireworks/Fireworks.module.css","components/Message/Message.tsx","components/Fireworks/particles.ts","components/Fireworks/Fireworks.tsx","components/Form/Form.tsx","components/Sentiment/particles.ts","components/Sentiment/Sentiment.tsx","components/App/App.tsx","serviceWorker.ts","index.tsx"],"names":["devicePixelRatio","dpr","requestAnimationFrame","raf","cancelAnimationFrame","caf","window","atan2","cos","PI","π","random","sin","Math","ππ","add","a","b","x","y","sub","pool","ofSize","withProps","Array","fill","map","currPos","prevPos","active","Sender","reducer","state","action","type","messages","messagesTop","payload","messagesHeight","isShowingFireworks","isShowingSentiment","id","uuid","createdAt","Date","toISOString","message","find","m","index","indexOf","slice","top","height","initialState","module","exports","Messages","dispatch","messagesElRef","useRef","sentinelElRef","isNearBottom","messagesTopRef","current","messagesHeightRef","useEffect","el","minScroll","clientHeight","onScroll","scrollTop","scrollBottom","messagesBottom","addEventListener","passive","removeEventListener","isOwnMessage","length","sender","Self","setImmediate","scrollIntoView","behavior","className","style","ref","reduce","acc","content","undefined","push","key","Sentinel","getComputedStyle","getStyle","outerTop","marginTop","offsetTop","parseInt","outerHeight","marginBottom","px","Message","messageElRef","clsx","Other","title","gravity","sparks","hue","Fireworks","fireworksElRef","context","setContext","useState","parentElement","width","getBoundingClientRect","opacity","getContext","hw","hh","frameId","firstTime","time","onFrame","timeStamp","fillStyle","fillRect","numActivated","shouldEmit","emitX","emitY","forEach","spark","theta","radius","activate","currVel","nextPos","update","render","every","setTimeout","Form","setMessage","onSubmit","event","preventDefault","Input","value","onChange","target","Button","disabled","hearts","scale","Sentiment","sentimentElRef","visibleHearts","setVisibleHearts","clientWidth","heart","py","filter","role","aria-label","Heart","transform","App","useReducer","wrappedDispatch","useCallback","trim","Device","Header","Footer","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.5c5e7682.chunk.js","sourcesContent":["import { Particle, Vec2 } from './types';\n\nexport * from './types';\n\nexport const {\n  devicePixelRatio: dpr,\n  requestAnimationFrame: raf,\n  cancelAnimationFrame: caf,\n} = window;\n\nexport const { atan2, cos, PI: π, random, sin } = Math;\nexport const ππ = π * 2;\n\nexport const add: (a: Vec2, b: Vec2) => Vec2 = (a, b) => ({\n  x: a.x + b.x,\n  y: a.y + b.y,\n});\n\nexport const sub: (a: Vec2, b: Vec2) => Vec2 = (a, b) => ({\n  x: a.x - b.x,\n  y: a.y - b.y,\n});\n\nexport const pool: <T extends Particle>(\n  ofSize: number,\n  withProps: () => any,\n) => T[] = (ofSize, withProps) =>\n  new Array(ofSize).fill(0).map(() => ({\n    ...withProps(),\n    currPos: { x: 0, y: 0 },\n    prevPos: { x: 0, y: 0 },\n    active: false,\n  }));\n\nexport const update: <T extends Particle>(particle: T) => void = (particle) => {\n  const currVel = sub(particle.currPos, particle.prevPos);\n  const nextPos = add(particle.currPos, currVel);\n\n  particle.prevPos = particle.currPos;\n  particle.currPos = nextPos;\n};\n","export enum Sender {\n  Self = 'Self',\n  Other = 'Other',\n}\n\nexport interface MessageData {\n  id: string;\n  createdAt: string;\n  sender: Sender;\n  content: string;\n  top?: number;\n  height?: number;\n}\n\nexport interface AppState {\n  messages: MessageData[];\n  messagesTop: number;\n  messagesHeight: number;\n  isShowingFireworks: boolean;\n  isShowingSentiment: boolean;\n}\n\nexport interface SetMessagesTopAction {\n  type: 'setMessagesTop';\n  payload: {\n    messagesTop: number;\n  };\n}\n\nexport interface SetMessagesHeightAction {\n  type: 'setMessagesHeight';\n  payload: {\n    messagesHeight: number;\n  };\n}\n\nexport interface AddMessageAction {\n  type: 'addMessage';\n  payload: {\n    sender: Sender;\n    content: string;\n  };\n}\n\nexport interface RenderMessageAction {\n  type: 'renderMessage';\n  payload: {\n    id: string;\n    top: number;\n    height: number;\n  };\n}\n\nexport interface SetIsShowingFireworksAction {\n  type: 'setIsShowingFireworks';\n  payload: {\n    isShowingFireworks: boolean;\n  };\n}\n\nexport interface SetIsShowingSentimentAction {\n  type: 'setIsShowingSentiment';\n  payload: {\n    isShowingSentiment: boolean;\n  };\n}\n\nexport type AppAction =\n  | SetMessagesTopAction\n  | SetMessagesHeightAction\n  | AddMessageAction\n  | RenderMessageAction\n  | SetIsShowingFireworksAction\n  | SetIsShowingSentimentAction;\n","import { Reducer } from 'react';\nimport { v4 as uuid } from 'uuid';\n\nimport { AppAction, AppState } from './types';\n\nexport * from './types';\n\nexport const reducer: Reducer<AppState, AppAction> = (state, action) => {\n  switch (action.type) {\n    case 'setMessagesTop':\n      return {\n        messages: state.messages,\n        messagesTop: action.payload.messagesTop,\n        messagesHeight: state.messagesHeight,\n        isShowingFireworks: state.isShowingFireworks,\n        isShowingSentiment: state.isShowingSentiment,\n      };\n    case 'setMessagesHeight':\n      return {\n        messages: state.messages,\n        messagesTop: state.messagesTop,\n        messagesHeight: action.payload.messagesHeight,\n        isShowingFireworks: state.isShowingFireworks,\n        isShowingSentiment: state.isShowingSentiment,\n      };\n    case 'addMessage':\n      return {\n        messages: [\n          ...state.messages,\n          {\n            id: uuid(),\n            createdAt: new Date().toISOString(),\n            ...action.payload,\n          },\n        ],\n        messagesTop: state.messagesTop,\n        messagesHeight: state.messagesHeight,\n        isShowingFireworks: state.isShowingFireworks,\n        isShowingSentiment: state.isShowingSentiment,\n      };\n    case 'renderMessage':\n      const message = state.messages.find((m) => m.id === action.payload.id);\n      const index = message ? state.messages.indexOf(message) : -1;\n\n      return message && index !== -1\n        ? {\n            messages: [\n              ...state.messages.slice(0, index),\n              {\n                ...message,\n                top: action.payload.top,\n                height: action.payload.height,\n              },\n              ...state.messages.slice(index + 1),\n            ],\n            messagesTop: state.messagesTop,\n            messagesHeight: state.messagesHeight + action.payload.height,\n            isShowingFireworks: state.isShowingFireworks,\n            isShowingSentiment: state.isShowingSentiment,\n          }\n        : state;\n    case 'setIsShowingFireworks':\n      return {\n        messages: state.messages,\n        messagesTop: state.messagesTop,\n        messagesHeight: state.messagesHeight,\n        isShowingFireworks: action.payload.isShowingFireworks,\n        isShowingSentiment: state.isShowingSentiment,\n      };\n    case 'setIsShowingSentiment':\n      return {\n        messages: state.messages,\n        messagesTop: state.messagesTop,\n        messagesHeight: state.messagesHeight,\n        isShowingFireworks: state.isShowingFireworks,\n        isShowingSentiment: action.payload.isShowingSentiment,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const initialState: AppState = {\n  messages: [],\n  messagesTop: 0,\n  messagesHeight: 0,\n  isShowingFireworks: false,\n  isShowingSentiment: false,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Form\":\"Form_Form__2boAo\",\"Input\":\"Form_Input__1kIqz\",\"Button\":\"Form_Button__1q5fL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Message\":\"Message_Message__L9LXR\",\"Self\":\"Message_Self__13TvW\",\"Other\":\"Message_Other__oJUsj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Device\":\"App_Device__1vnMx\",\"Header\":\"App_Header__2rl_K\",\"Footer\":\"App_Footer__3E1PI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Messages\":\"Messages_Messages__2D-Ym\",\"Sentinel\":\"Messages_Sentinel__286rc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Sentiment\":\"Sentiment_Sentiment__ACt7i\",\"Heart\":\"Sentiment_Heart__z1evg\"};","import React, { Dispatch, FC, ReactNode, useEffect, useRef } from 'react';\n\nimport { AppAction, MessageData, Sender } from '../../app';\n\nimport { Message } from '../Message';\n\nimport style from './Messages.module.css';\n\ninterface Props {\n  messages: MessageData[];\n  messagesTop: number;\n  messagesHeight: number;\n  dispatch: Dispatch<AppAction>;\n}\n\nexport const Messages: FC<Props> = ({\n  messages,\n  messagesTop,\n  messagesHeight,\n  dispatch,\n}) => {\n  const messagesElRef = useRef<HTMLOListElement>(null);\n  const sentinelElRef = useRef<HTMLLIElement>(null);\n\n  const isNearBottom = useRef(true);\n\n  const messagesTopRef = useRef(messagesTop);\n  messagesTopRef.current = messagesTop;\n\n  const messagesHeightRef = useRef(messagesHeight);\n  messagesHeightRef.current = messagesHeight;\n\n  useEffect(() => {\n    if (!messagesElRef.current) {\n      return;\n    }\n\n    const el = messagesElRef.current;\n    const minScroll = el.clientHeight - 8;\n\n    dispatch({\n      type: 'setMessagesHeight',\n      payload: {\n        messagesHeight: el.clientHeight,\n      },\n    });\n\n    const onScroll = () => {\n      if (el.scrollTop < messagesTopRef.current && el.scrollTop < minScroll) {\n        el.scrollTop = minScroll;\n      }\n\n      dispatch({\n        type: 'setMessagesTop',\n        payload: {\n          messagesTop: el.scrollTop,\n        },\n      });\n\n      const scrollBottom = el.scrollTop + el.clientHeight;\n      const messagesBottom = messagesHeightRef.current - el.clientHeight / 3;\n      isNearBottom.current = scrollBottom > messagesBottom;\n    };\n\n    el.addEventListener('scroll', onScroll, { passive: true });\n    return () => {\n      el.removeEventListener('scroll', onScroll);\n    };\n  }, [dispatch]);\n\n  useEffect(() => {\n    const isOwnMessage = messages[messages.length - 1]?.sender === Sender.Self;\n\n    if (isNearBottom.current || isOwnMessage) {\n      setImmediate(() => {\n        if (!sentinelElRef.current) {\n          return;\n        }\n\n        sentinelElRef.current.scrollIntoView({\n          behavior: 'smooth',\n        });\n      });\n    }\n  }, [messages]);\n\n  return (\n    <ol className={style.Messages} ref={messagesElRef}>\n      {messages.reduce<ReactNode[]>(\n        (acc, { id, createdAt, sender, content, top, height }) => {\n          if (!messagesElRef.current) {\n            return acc;\n          }\n\n          const { clientHeight } = messagesElRef.current;\n          const didMeasure = top !== undefined && height !== undefined;\n          const isInBounds =\n            top &&\n            height &&\n            top < messagesTop + clientHeight &&\n            top + height > messagesTop;\n\n          if (!didMeasure || isInBounds) {\n            acc.push(\n              <Message\n                key={id}\n                id={id}\n                createdAt={createdAt}\n                sender={sender}\n                content={content}\n                top={top}\n                height={height}\n                messagesHeight={messagesHeight}\n                dispatch={dispatch}\n              />,\n            );\n          }\n\n          return acc;\n        },\n        [],\n      )}\n      <li\n        className={style.Sentinel}\n        style={{ top: messagesHeight }}\n        ref={sentinelElRef}\n      ></li>\n    </ol>\n  );\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Fireworks\":\"Fireworks_Fireworks__20lpI\"};","import clsx from 'clsx';\nimport React, { Dispatch, FC, useEffect, useRef } from 'react';\n\nimport { AppAction, MessageData, Sender } from '../../app';\n\nimport style from './Message.module.css';\n\ninterface Props extends MessageData {\n  messagesHeight: number;\n  dispatch: Dispatch<AppAction>;\n}\n\nconst { getComputedStyle: getStyle } = window;\n\nconst outerTop: (el: HTMLElement) => number = (el) => {\n  const { marginTop } = getStyle(el);\n  return el.offsetTop - parseInt(marginTop, 10);\n};\n\nconst outerHeight: (el: HTMLElement) => number = (el) => {\n  const { marginTop, height, marginBottom } = getStyle(el);\n  return [marginTop, height, marginBottom].reduce(\n    (acc, px) => acc + parseInt(px, 10),\n    0,\n  );\n};\n\nexport const Message: FC<Props> = ({\n  id,\n  createdAt,\n  sender,\n  content,\n  top,\n  height,\n  messagesHeight,\n  dispatch,\n}) => {\n  const messageElRef = useRef<HTMLLIElement>(null);\n\n  useEffect(() => {\n    if (!messageElRef.current) {\n      return;\n    }\n\n    if (top === undefined && height === undefined) {\n      dispatch({\n        type: 'renderMessage',\n        payload: {\n          id,\n          top: messagesHeight + outerTop(messageElRef.current),\n          height: outerHeight(messageElRef.current),\n        },\n      });\n    }\n  }, [dispatch, height, id, messagesHeight, top]);\n\n  return (\n    <li\n      className={clsx({\n        [style.Message]: true,\n        [style.Self]: sender === Sender.Self,\n        [style.Other]: sender === Sender.Other,\n      })}\n      title={createdAt}\n      style={{\n        top,\n      }}\n      ref={messageElRef}\n    >\n      {content}\n    </li>\n  );\n};\n","import {\n  add,\n  cos,\n  Particle,\n  pool,\n  random,\n  sin,\n  sub,\n  Vec2,\n  π,\n  ππ,\n} from '../../lib';\n\ninterface Spark extends Particle {\n  hue: number;\n}\n\nconst maxInitialSpeed = 15;\nconst gravity: Vec2 = { x: 0, y: 0.2 };\n\nexport const numToActivate = 500;\nexport const sparks = pool<Spark>(5_000, () => ({\n  hue: 0,\n}));\n\nexport const activate: (spark: Spark, x: number, y: number) => void = (\n  spark,\n  x,\n  y,\n) => {\n  const theta = random() * ππ;\n  const radius = random() * maxInitialSpeed;\n\n  spark.currPos = { x, y };\n  spark.prevPos = { x: x + cos(theta) * radius, y: y + sin(theta) * radius };\n  spark.active = true;\n  spark.hue = random() * ππ * (180 / π);\n};\n\nexport const update: (spark: Spark) => void = (spark) => {\n  const currVel = add(sub(spark.currPos, spark.prevPos), gravity);\n  const nextPos = add(spark.currPos, currVel);\n\n  spark.prevPos = spark.currPos;\n  spark.currPos = nextPos;\n};\n\nexport const render: (\n  context: CanvasRenderingContext2D,\n  spark: Spark,\n) => void = (context, { currPos, prevPos, hue }) => {\n  context.fillStyle = 'white';\n  context.fillRect(prevPos.x - 4, prevPos.y - 4, 8, 8);\n\n  context.fillStyle = `hsl(${hue}, 80%, 50%)`;\n  context.fillRect(currPos.x - 4, currPos.y - 4, 8, 8);\n};\n","import React, { Dispatch, FC, useEffect, useRef, useState } from 'react';\n\nimport { AppAction } from '../../app';\nimport { caf, dpr, raf, random } from '../../lib';\n\nimport style from './Fireworks.module.css';\nimport { activate, numToActivate, render, sparks, update } from './particles';\n\ninterface Props {\n  dispatch: Dispatch<AppAction>;\n}\n\nexport const Fireworks: FC<Props> = ({ dispatch }) => {\n  const fireworksElRef = useRef<HTMLCanvasElement>(null);\n  const [context, setContext] = useState<CanvasRenderingContext2D | null>(null);\n\n  useEffect(() => {\n    if (!(fireworksElRef.current && fireworksElRef.current.parentElement)) {\n      return;\n    }\n\n    const {\n      width,\n      height,\n    } = fireworksElRef.current.parentElement.getBoundingClientRect();\n\n    fireworksElRef.current.width = width * dpr;\n    fireworksElRef.current.height = height * dpr;\n    fireworksElRef.current.style.opacity = '1';\n\n    setContext(fireworksElRef.current.getContext('2d'));\n  }, []);\n\n  useEffect(() => {\n    if (!(fireworksElRef.current && context)) {\n      return;\n    }\n\n    const { width, height } = fireworksElRef.current;\n    const hw = width / 2;\n    const hh = height / 2;\n\n    let frameId: number;\n    let firstTime = 0;\n    let time = 0;\n\n    const onFrame: FrameRequestCallback = (timeStamp: DOMHighResTimeStamp) => {\n      frameId = raf(onFrame);\n\n      firstTime || (firstTime = timeStamp);\n      time = timeStamp - firstTime;\n\n      context.fillStyle = 'black';\n      context.fillRect(0, 0, width, height);\n\n      let numActivated = 0;\n      const shouldEmit = time % 1_000 < 18 && time < 5_000;\n      const emitX = hw / 2 + random() * hw;\n      const emitY = hh / 4 + random() * hh;\n\n      sparks.forEach((spark) => {\n        if (!spark.active && shouldEmit) {\n          if (numActivated < numToActivate) {\n            activate(spark, emitX, emitY);\n            ++numActivated;\n          } else {\n            return;\n          }\n        }\n\n        spark.active =\n          0 < spark.currPos.x &&\n          spark.currPos.x < width &&\n          0 < spark.currPos.y &&\n          spark.currPos.y < height;\n\n        if (!spark.active) {\n          return;\n        }\n\n        update(spark);\n        render(context, spark);\n      });\n\n      if (\n        time > 5_000 &&\n        sparks.every(({ active }) => !active) &&\n        fireworksElRef.current\n      ) {\n        fireworksElRef.current.style.opacity = '0';\n        caf(frameId);\n\n        setTimeout(\n          () =>\n            dispatch({\n              type: 'setIsShowingFireworks',\n              payload: {\n                isShowingFireworks: false,\n              },\n            }),\n          400,\n        );\n      }\n    };\n\n    frameId = raf(onFrame);\n    return () => {\n      caf(frameId);\n    };\n  }, [context, dispatch]);\n\n  return <canvas className={style.Fireworks} ref={fireworksElRef}></canvas>;\n};\n","import React, { Dispatch, FC, useState } from 'react';\n\nimport { AppAction, Sender } from '../../app';\n\nimport style from './Form.module.css';\n\ninterface Props {\n  dispatch: Dispatch<AppAction>;\n}\n\nexport const Form: FC<Props> = ({ dispatch }) => {\n  const [message, setMessage] = useState('');\n\n  return (\n    <form\n      action=\"\"\n      className={style.Form}\n      onSubmit={(event) => {\n        event.preventDefault();\n\n        dispatch({\n          type: 'addMessage',\n          payload: {\n            sender: Sender.Self,\n            content: message,\n          },\n        });\n\n        setMessage('');\n      }}\n    >\n      <input\n        type=\"text\"\n        className={style.Input}\n        value={message}\n        onChange={(event) => {\n          setMessage(event.target.value);\n        }}\n      />\n      <button type=\"submit\" className={style.Button} disabled={message === ''}>\n        ↑\n      </button>\n    </form>\n  );\n};\n","import { v4 as uuid } from 'uuid';\n\nimport {\n  add,\n  cos,\n  Field,\n  Particle,\n  pool,\n  random,\n  sin,\n  sub,\n  Vec2,\n  ππ,\n} from '../../lib';\n\nexport interface Heart extends Particle {\n  id: string;\n  opacity: number;\n  scale: number;\n}\n\nconst maxInitialSpeed = 5;\nconst gravity: Vec2 = { x: 0, y: -0.1 };\n\nexport const numToActivate = 5;\nexport const hearts = pool<Heart>(50, () => ({\n  id: uuid(),\n  opacity: 1,\n  scale: 1,\n}));\n\nexport const activate: (heart: Heart, x: number, y: number) => void = (\n  heart,\n  x,\n  y,\n) => {\n  const theta = random() * ππ;\n  const radius = random() * maxInitialSpeed;\n\n  const px = x + cos(theta) * radius;\n  const py = y + sin(theta) * radius;\n\n  heart.currPos = { x, y };\n  heart.prevPos = { x: px, y: py };\n  heart.active = true;\n  heart.opacity = 1;\n  heart.scale = 1;\n};\n\nexport const update: (heart: Heart, field: Field) => void = (\n  heart,\n  { height },\n) => {\n  const currVel = add(sub(heart.currPos, heart.prevPos), gravity);\n  const nextPos = add(heart.currPos, currVel);\n\n  heart.prevPos = heart.currPos;\n  heart.currPos = nextPos;\n\n  heart.opacity = heart.currPos.y / height;\n  heart.scale = 2 - heart.currPos.y / height;\n};\n","import React, { Dispatch, FC, useEffect, useRef, useState } from 'react';\n\nimport { AppAction } from '../../app';\nimport { caf, raf, random } from '../../lib';\n\nimport { activate, Heart, hearts, numToActivate, update } from './particles';\nimport style from './Sentiment.module.css';\n\ninterface Props {\n  dispatch: Dispatch<AppAction>;\n}\n\nexport const Sentiment: FC<Props> = ({ dispatch }) => {\n  const sentimentElRef = useRef<HTMLDivElement>(null);\n  const [visibleHearts, setVisibleHearts] = useState<Heart[]>([]);\n\n  useEffect(() => {\n    if (!sentimentElRef.current) {\n      return;\n    }\n\n    sentimentElRef.current.style.opacity = '1';\n    const { clientWidth: width, clientHeight: height } = sentimentElRef.current;\n\n    let frameId: number;\n    let firstTime = 0;\n    let time = 0;\n\n    const onFrame: FrameRequestCallback = (timeStamp: DOMHighResTimeStamp) => {\n      frameId = raf(onFrame);\n\n      firstTime || (firstTime = timeStamp);\n      time = timeStamp - firstTime;\n\n      let numActivated = 0;\n      const shouldEmit = time % 80 < 16 && time < 5_000;\n      const emitX = random() * width;\n      const emitY = height;\n\n      hearts.forEach((heart) => {\n        if (!heart.active && shouldEmit) {\n          if (numActivated < numToActivate) {\n            activate(heart, emitX, emitY);\n            ++numActivated;\n          } else {\n            return;\n          }\n        }\n\n        heart.active =\n          0 < heart.currPos.x &&\n          heart.currPos.x < width &&\n          -40 < heart.currPos.y &&\n          heart.currPos.y < height + 40;\n\n        if (!heart.active) {\n          return;\n        }\n\n        update(heart, { width, height, time });\n      });\n\n      setVisibleHearts(hearts.filter(({ active }) => active));\n\n      if (\n        time > 5_000 &&\n        hearts.every(({ active }) => !active) &&\n        sentimentElRef.current\n      ) {\n        sentimentElRef.current.style.opacity = '0';\n        caf(frameId);\n\n        setTimeout(\n          () =>\n            dispatch({\n              type: 'setIsShowingSentiment',\n              payload: {\n                isShowingSentiment: false,\n              },\n            }),\n          400,\n        );\n      }\n    };\n\n    frameId = raf(onFrame);\n    return () => {\n      caf(frameId);\n    };\n  }, [dispatch]);\n\n  return (\n    <div className={style.Sentiment} ref={sentimentElRef}>\n      {visibleHearts.map(({ id, currPos: { x, y }, opacity, scale }) => (\n        <span\n          role=\"img\"\n          aria-label=\"love\"\n          className={style.Heart}\n          key={id}\n          style={{\n            opacity,\n            transform: `translate(${x}px, ${y}px) scale(${scale})`,\n          }}\n        >\n          ❤️\n        </span>\n      ))}\n    </div>\n  );\n};\n","import React, { FC, useCallback, useReducer } from 'react';\n\nimport { AppAction, initialState, reducer, Sender } from '../../app';\n\nimport { Fireworks } from '../Fireworks';\nimport { Form } from '../Form';\nimport { Messages } from '../Messages';\n\nimport style from './App.module.css';\nimport { Sentiment } from '../Sentiment';\n\nexport const App: FC = () => {\n  const [\n    {\n      messages,\n      messagesTop,\n      messagesHeight,\n      isShowingFireworks,\n      isShowingSentiment,\n    },\n    dispatch,\n  ] = useReducer(reducer, initialState);\n\n  const wrappedDispatch = useCallback(\n    (action: AppAction) => {\n      dispatch(action);\n\n      if (action.type !== 'addMessage') {\n        return;\n      }\n\n      if (action.payload.content.indexOf('say ') === 0) {\n        setTimeout(() => {\n          wrappedDispatch({\n            type: 'addMessage',\n            payload: {\n              sender: Sender.Other,\n              content: action.payload.content.slice(3).trim(),\n            },\n          });\n        }, 2_000);\n      }\n\n      if (action.payload.content === 'congrats') {\n        dispatch({\n          type: 'setIsShowingFireworks',\n          payload: {\n            isShowingFireworks: true,\n          },\n        });\n      }\n\n      if (action.payload.content === '❤️') {\n        dispatch({\n          type: 'setIsShowingSentiment',\n          payload: {\n            isShowingSentiment: true,\n          },\n        });\n      }\n    },\n    [dispatch],\n  );\n\n  return (\n    <article className={style.Device}>\n      {isShowingFireworks && <Fireworks dispatch={dispatch} />}\n      <header className={style.Header}>Bot</header>\n      <Messages\n        messages={messages}\n        messagesTop={messagesTop}\n        messagesHeight={messagesHeight}\n        dispatch={dispatch}\n      />\n      <footer className={style.Footer}>\n        <Form dispatch={wrappedDispatch} />\n      </footer>\n      {isShowingSentiment && <Sentiment dispatch={dispatch} />}\n    </article>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import './index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}