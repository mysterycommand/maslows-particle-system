(this["webpackJsonpmaslows-particle-system"]=this["webpackJsonpmaslows-particle-system"]||[]).push([[0],[,function(e,s,t){"use strict";t.d(s,"a",(function(){return a})),t.d(s,"c",(function(){return n})),t.d(s,"b",(function(){return o}));var r=t(24);let a;!function(e){e.Self="Self",e.Other="Other"}(a||(a={}));const n=(e,s)=>{switch(s.type){case"setMessagesTop":return{messages:e.messages,messagesTop:s.payload.messagesTop,messagesHeight:e.messagesHeight,isShowingFireworks:e.isShowingFireworks};case"setMessagesHeight":return{messages:e.messages,messagesTop:e.messagesTop,messagesHeight:s.payload.messagesHeight,isShowingFireworks:e.isShowingFireworks};case"addMessage":return{messages:[...e.messages,{id:Object(r.a)(),createdAt:(new Date).toISOString(),...s.payload}],messagesTop:e.messagesTop,messagesHeight:e.messagesHeight,isShowingFireworks:e.isShowingFireworks};case"renderMessage":const t=e.messages.find(e=>e.id===s.payload.id),a=t?e.messages.indexOf(t):-1;return t&&-1!==a?{messages:[...e.messages.slice(0,a),{...t,top:s.payload.top,height:s.payload.height},...e.messages.slice(a+1)],messagesTop:e.messagesTop,messagesHeight:e.messagesHeight+s.payload.height,isShowingFireworks:e.isShowingFireworks}:e;case"setIsShowingFireworks":return{messages:e.messages,messagesTop:e.messagesTop,messagesHeight:e.messagesHeight,isShowingFireworks:s.payload.isShowingFireworks};default:return e}},o={messages:[],messagesTop:0,messagesHeight:0,isShowingFireworks:!1}},function(e,s,t){e.exports={Form:"Form_Form__2boAo",Input:"Form_Input__1kIqz",Button:"Form_Button__1q5fL"}},function(e,s,t){e.exports={Message:"Message_Message__L9LXR",Self:"Message_Self__13TvW",Other:"Message_Other__oJUsj"}},function(e,s,t){e.exports={Device:"App_Device__1vnMx",Header:"App_Header__2rl_K",Footer:"App_Footer__3E1PI"}},function(e,s,t){e.exports={Messages:"Messages_Messages__2D-Ym",Sentinel:"Messages_Sentinel__286rc"}},,function(e,s,t){"use strict";(function(e){t.d(s,"a",(function(){return l}));var r=t(0),a=t.n(r),n=t(1),o=t(12),i=t(5),c=t.n(i);const l=({messages:s,messagesTop:t,messagesHeight:i,dispatch:l})=>{const g=Object(r.useRef)(null),u=Object(r.useRef)(null),m=Object(r.useRef)(!0),p=Object(r.useRef)(t);p.current=t;const h=Object(r.useRef)(i);return h.current=i,Object(r.useEffect)(()=>{if(!g.current)return;const e=g.current,s=e.clientHeight-8;l({type:"setMessagesHeight",payload:{messagesHeight:e.clientHeight}});const t=()=>{e.scrollTop<p.current&&e.scrollTop<s&&(e.scrollTop=s),l({type:"setMessagesTop",payload:{messagesTop:e.scrollTop}});const t=e.scrollTop+e.clientHeight,r=h.current-e.clientHeight/3;m.current=t>r};return e.addEventListener("scroll",t,{passive:!0}),()=>{e.removeEventListener("scroll",t)}},[l]),Object(r.useEffect)(()=>{var t;const r=(null===(t=s[s.length-1])||void 0===t?void 0:t.sender)===n.a.Self;(m.current||r)&&e(()=>{u.current&&u.current.scrollIntoView({behavior:"smooth"})})},[s]),a.a.createElement("ol",{className:c.a.Messages,ref:g},s.reduce((e,{id:s,createdAt:r,sender:n,content:c,top:u,height:m})=>{if(!g.current)return e;const{clientHeight:p}=g.current;return void 0!==u&&void 0!==m&&!(u&&m&&u<t+p&&u+m>t)||e.push(a.a.createElement(o.a,{key:s,id:s,createdAt:r,sender:n,content:c,top:u,height:m,messagesHeight:i,dispatch:l})),e},[]),a.a.createElement("li",{className:c.a.Sentinel,style:{top:i},ref:u}))}}).call(this,t(19).setImmediate)},,,function(e,s,t){e.exports={Fireworks:"Fireworks_Fireworks__20lpI"}},,function(e,s,t){"use strict";t.d(s,"a",(function(){return m}));var r=t(11),a=t(0),n=t.n(a),o=t(1),i=t(3),c=t.n(i);const{getComputedStyle:l}=window,g=e=>{const{marginTop:s}=l(e);return e.offsetTop-parseInt(s,10)},u=e=>{const{marginTop:s,height:t,marginBottom:r}=l(e);return[s,t,r].reduce((e,s)=>e+parseInt(s,10),0)},m=({id:e,createdAt:s,sender:t,content:i,top:l,height:m,messagesHeight:p,dispatch:h})=>{const d=Object(a.useRef)(null);return Object(a.useEffect)(()=>{d.current&&void 0===l&&void 0===m&&h({type:"renderMessage",payload:{id:e,top:p+g(d.current),height:u(d.current)}})},[h,m,e,p,l]),n.a.createElement("li",{className:Object(r.a)({[c.a.Message]:!0,[c.a.Self]:t===o.a.Self,[c.a.Other]:t===o.a.Other}),title:s,style:{top:l},ref:d},i)}},function(e,s,t){e.exports=t(22)},function(e,s,t){},,,,,,,,function(e,s,t){"use strict";t.r(s);t(14);var r=t(0),a=t.n(r),n=t(9),o=t.n(n),i=t(1),c=t(10),l=t.n(c);const{devicePixelRatio:g,requestAnimationFrame:u,cancelAnimationFrame:m}=window,{cos:p,PI:h,random:d,sin:f}=Math,w=2*h;let y=[];const S={x:0,y:.2},v=(e,s)=>{const t=d()*w,r=15*d();return{currPos:{x:e,y:s},prevPos:{x:e+p(t)*r,y:s+f(t)*r},hue:d()*w*(180/h)}},_=(e,s)=>({x:e.x+s.x,y:e.y+s.y}),b=({dispatch:e})=>{const s=Object(r.useRef)(null),[t,n]=Object(r.useState)(null);return Object(r.useEffect)(()=>{if(!s.current||!s.current.parentElement)return;const{width:e,height:t}=s.current.parentElement.getBoundingClientRect();s.current.width=e*g,s.current.height=t*g,s.current.style.opacity="1",n(s.current.getContext("2d"))},[]),Object(r.useEffect)(()=>{if(!s.current||!t)return;const{width:r,height:a}=s.current,n=r/2,o=a/2;let i,c=0,l=0;const g=p=>{if(i=u(g),c||(c=p),l=p-c,l%1e3<16&&l<5e3){const e=n/2+d()*n,s=o/4+d()*o;for(let t=0;t<100;++t)y.push(v(e,s))}t.fillStyle="black",t.fillRect(0,0,r,a),y.forEach(e=>{(e=>{const s=_((t=e.currPos,r=e.prevPos,{x:t.x-r.x,y:t.y-r.y}),S);var t,r;const a=_(e.currPos,s);e.prevPos=e.currPos,e.currPos=a})(e),((e,{currPos:s,prevPos:t,hue:r})=>{e.beginPath(),e.fillStyle=`hsl(${r}, 80%, 50%)`,e.ellipse(s.x,s.y,5,5,0,0,w),e.fill(),e.beginPath(),e.fillStyle=`hsl(${(r+180)%360}, 80%, 50%)`,e.ellipse(t.x,t.y,5,5,0,0,w),e.fill()})(t,e)}),y=y.reduce((e,s)=>{const{currPos:{x:t,y:n}}=s;return 0<t&&t<r&&0<n&&n<a&&e.push(s),e},[]),l>5e3&&0===y.length&&s.current&&(s.current.style.opacity="0",m(i),setTimeout(()=>{e({type:"setIsShowingFireworks",payload:{isShowingFireworks:!1}})},400))};return i=u(g),()=>{m(i)}},[t,e]),a.a.createElement("canvas",{className:l.a.Fireworks,ref:s})};var F=t(2),k=t.n(F);const E=({dispatch:e})=>{const[s,t]=Object(r.useState)("");return a.a.createElement("form",{action:"",className:k.a.Form,onSubmit:r=>{r.preventDefault(),e({type:"addMessage",payload:{sender:i.a.Self,content:s}}),t("")}},a.a.createElement("input",{type:"text",className:k.a.Input,value:s,onChange:e=>{t(e.target.value)}}),a.a.createElement("button",{type:"submit",className:k.a.Button,disabled:""===s},"\u2191"))};var O=t(7),T=t(4),H=t.n(T);const M=()=>{const[{messages:e,messagesTop:s,messagesHeight:t,isShowingFireworks:n},o]=Object(r.useReducer)(i.c,i.b),c=Object(r.useCallback)(e=>{o(e),"addMessage"===e.type&&0===e.payload.content.indexOf("say ")&&setTimeout(()=>{c({type:"addMessage",payload:{sender:i.a.Other,content:e.payload.content.slice(3).trim()}})},2e3),"addMessage"===e.type&&"congrats"===e.payload.content&&o({type:"setIsShowingFireworks",payload:{isShowingFireworks:!0}})},[o]);return a.a.createElement("article",{className:H.a.Device},n&&a.a.createElement(b,{dispatch:o}),a.a.createElement("header",{className:H.a.Header},"Bot"),a.a.createElement(O.a,{messages:e,messagesTop:s,messagesHeight:t,dispatch:o}),a.a.createElement("footer",{className:H.a.Footer},a.a.createElement(E,{dispatch:c})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}],[[13,1,2]]]);
//# sourceMappingURL=main.04936e3f.chunk.js.map