(this["webpackJsonpmaslows-particle-system"]=this["webpackJsonpmaslows-particle-system"]||[]).push([[0],[,function(e,t,s){e.exports={App:"App_App__aOmNj",Device:"App_Device__1vnMx",Header:"App_Header__2rl_K",Footer:"App_Footer__3E1PI",Messages:"App_Messages__3MBtI",Sentinel:"App_Sentinel__2T4Ch"}},function(e,t,s){e.exports={Form:"Form_Form__2boAo",Input:"Form_Input__1kIqz",Button:"Form_Button__1q5fL"}},function(e,t,s){e.exports={Message:"Message_Message__L9LXR",Self:"Message_Self__13TvW",Other:"Message_Other__oJUsj"}},,,,function(e,t,s){e.exports=s(13)},function(e,t,s){},,,,,function(e,t,s){"use strict";s.r(t);s(8);var a=s(0),n=s.n(a),r=s(5),o=s.n(r),c=s(15);let i;!function(e){e.Self="Self",e.Other="Other"}(i||(i={}));var l=s(2),m=s.n(l);const p=({dispatch:e})=>{const[t,s]=Object(a.useState)("");return n.a.createElement("form",{action:"",className:m.a.Form,onSubmit:a=>{a.preventDefault(),e({type:"addMessage",payload:{sender:i.Self,content:t}}),setTimeout(()=>{e({type:"addMessage",payload:{sender:i.Other,content:t}})},2e3),s("")}},n.a.createElement("input",{type:"text",className:m.a.Input,value:t,onChange:e=>{s(e.target.value)}}),n.a.createElement("button",{type:"submit",className:m.a.Button,disabled:""===t},"\u2191"))};var g=s(6),u=s(3),d=s.n(u);const{getComputedStyle:h}=window,_=e=>{const{marginTop:t}=h(e);return e.offsetTop-parseInt(t,10)},f=e=>{const{marginTop:t,height:s,marginBottom:a}=h(e);return[t,s,a].reduce((e,t)=>e+parseInt(t,10),0)},y=({id:e,createdAt:t,sender:s,content:r,top:o,height:c,messagesHeight:l,dispatch:m})=>{const p=Object(a.useRef)(null);return Object(a.useEffect)(()=>{p.current&&(o&&c?p.current.scrollIntoView({behavior:"smooth"}):m({type:"renderMessage",payload:{id:e,top:l+_(p.current),height:f(p.current)}}))},[m,c,e,l,o]),n.a.createElement("li",{className:Object(g.a)({[d.a.Message]:!0,[d.a.Self]:s===i.Self,[d.a.Other]:s===i.Other}),title:t,style:{top:o},ref:p},r)};var v=s(1),E=s.n(v);const O=(e,t)=>{switch(t.type){case"initMessages":return{messages:e.messages,messagesHeight:t.payload.messagesHeight};case"addMessage":return{messages:[...e.messages,{id:Object(c.a)(),createdAt:(new Date).toISOString(),...t.payload}],messagesHeight:e.messagesHeight};case"renderMessage":const s=e.messages.find(e=>e.id===t.payload.id),a=s?e.messages.indexOf(s):-1;return s&&-1!==a?{messages:[...e.messages.slice(0,a),{...s,top:t.payload.top,height:t.payload.height},...e.messages.slice(a+1)],messagesHeight:e.messagesHeight+t.payload.height}:e;default:return e}},M=()=>{const[{messages:e,messagesHeight:t},s]=Object(a.useReducer)(O,{messages:[],messagesHeight:0}),r=Object(a.useRef)(null);Object(a.useEffect)(()=>{r.current&&s({type:"initMessages",payload:{messagesHeight:r.current.clientHeight}})},[]);const[o,c]=Object(a.useState)(0);return Object(a.useEffect)(()=>{if(!r.current)return;const e=r.current,t=()=>c(e.scrollTop);return e.addEventListener("scroll",t,{passive:!0}),()=>{e.removeEventListener("scroll",t)}},[]),n.a.createElement("div",{className:E.a.App},n.a.createElement("article",{className:E.a.Device},n.a.createElement("header",{className:E.a.Header},"Echo"),n.a.createElement("ol",{className:E.a.Messages,ref:r},e.reduce((e,{id:a,createdAt:c,sender:i,content:l,top:m,height:p})=>{if(!r.current)return e;const{clientHeight:g}=r.current;return m&&p&&!(m&&p&&m<o+g&&m+p>o)||e.push(n.a.createElement(y,{key:a,id:a,createdAt:c,sender:i,content:l,top:m,height:p,messagesHeight:t,dispatch:s})),e},[]),n.a.createElement("li",{className:E.a.Sentinel,style:{top:t}})),n.a.createElement("footer",{className:E.a.Footer},n.a.createElement(p,{dispatch:s}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}],[[7,1,2]]]);
//# sourceMappingURL=main.00b09fbc.chunk.js.map